<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.goodiware.mapper.EmployeeMapper">

	<resultMap type="com.goodiware.vo.Employee" id="employeeMap">
		<id column="empno" property="empno" />
		<result column="id" property="id" />
		<result column="pw" property="pw" />
		<result column="name" property="name" />
		<result column="birth" property="birth" />
		<result column="phone" property="phone" />
		<result column="add1" property="add1" />
		<result column="add2" property="add2" />
		<result column="add3" property="add3" />
		<result column="joinday" property="joinday" />
		<result column="leaveday" property="leaveday" />
		<result column="picture" property="picture" />
		<result column="intro" property="intro" />
		<result column="deleted" property="deleted" />
		<association property="auth" column="authno" resultMap="authMap"></association>
	</resultMap>
	
	<resultMap type="com.goodiware.vo.Auth" id="authMap">
		<id column="authno" property="authno" />
		<result column="authname" property="authname" />
	</resultMap>


	<select id="selectEmployee" parameterType="com.goodiware.vo.Employee" resultMap="employeeMap" resultType="com.goodiware.vo.Employee">
		SELECT e.empno, e.id, e.pw, e.name, e.birth, e.phone, e.add1, e.add2, e.add3, e.joinday, e.leaveday, e.picture, e.intro, e.deleted, 
				e.posno, e.authno, e.depno, a.authno, a.authname 
		FROM EMPLOYEE e 
		inner join AUTH a
		on a.authno = e.authno 
		where e.id = #{id} and e.pw = #{pw} and deleted ='N'
	</select>
	
	<update id="updateEmployee" parameterType="com.goodiware.vo.Employee">
		UPDATE EMPLOYEE SET phone = #{ phone }, birth = #{ birth }, add1 = #{ add1 }, add2 = #{ add2 }, add3 = #{ add3 }, intro = #{ intro } where id = #{ id }
	</update>

</mapper>